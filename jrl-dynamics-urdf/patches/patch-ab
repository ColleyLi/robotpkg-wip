XXX: just a sample patch illustratin how to remove rosbuild for ros-groovy
XXX: this patch should be integrated upstream (either this plain cmake or by using
XXX: ros-catkin) before inclusion in robotpkg

--- tests/CMakeLists.txt.orig	2013-07-10 14:15:53.812973665 +0200
+++ tests/CMakeLists.txt	2013-07-10 14:31:17.505944506 +0200
@@ -1,6 +1,22 @@
 # Set the tests model directory.
 add_definitions(
-  "-DTEST_MODEL_DIRECTORY='\"${PROJECT_SOURCE_DIR}/tests/models\"'")
+  -DTEST_MODEL_DIRECTORY=\"${PROJECT_SOURCE_DIR}/tests/models\")

-rosbuild_add_gtest(one_dof_revolute_x one_dof_revolute_x.cpp)
-target_link_libraries(one_dof_revolute_x ${PROJECT_NAME})
+enable_testing()
+find_path(GTEST_INCLUDE_DIR gtest/gtest.h HINTS ${GTEST_ROOT}/include /usr/include)
+include_directories(${GTEST_INCLUDE_DIR})
+find_library(GTEST_LIBRARY gtest HINTS ${GTEST_ROOT}/lib /usr/lib)
+if(NOT GTEST_LIBRARY)
+  # for debian derivatives not shipping libgtest anymore ...
+  find_path(GTEST_SRC_DIR gtest/CMakeLists.txt HINTS ${GTEST_ROOT}/src /usr/src)
+  if(NOT GTEST_SRC_DIR)
+    message(FATAL_ERROR "gtest not found")
+  endif(NOT GTEST_SRC_DIR)
+  add_subdirectory(${GTEST_SRC_DIR}/gtest gtest EXCLUDE_FROM_ALL)
+endif(NOT GTEST_LIBRARY)
+
+add_executable(one_dof_revolute_x one_dof_revolute_x.cpp)
+target_link_libraries(one_dof_revolute_x ${PROJECT_NAME} gtest)
+add_dependencies(one_dof_revolute_x gtest)
+
+add_test(NAME one_dof_revolute_x COMMAND one_dof_revolute_x)
